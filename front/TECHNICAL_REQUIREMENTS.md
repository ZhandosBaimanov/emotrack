# Техническое задание: Платформа emoTrack (Frontend)

## 1. Общее описание проекта

**emoTrack** — веб-платформа для взаимодействия психологов и пациентов, включающая трекинг эмоционального состояния, систему тестирования, образовательные ресурсы и коммуникационные инструменты.

## 2. Технологический стек Frontend

- **HTMX** (для SPA-подобного взаимодействия без перезагрузки страниц)
- **Alpine.js** (для клиентской интерактивности и реактивности)
- **Tailwind CSS** (utility-first стилизация)
- **Chart.js** или **ApexCharts** (для визуализации графиков настроения)

## 3. Общие требования к интерфейсу

### 3.1 Язык

- Весь интерфейс полностью на русском языке
- Все сообщения об ошибках на русском
- Форматирование дат и времени по российским стандартам

### 3.2 Адаптивность

- Mobile-first подход
- Корректное отображение на устройствах от 320px до 4K
- Оптимизация для touch-устройств
- Breakpoints: mobile (< 640px), tablet (640-1024px), desktop (> 1024px)

### 3.3 UX принципы

- SPA-подобное поведение через HTMX (без full page reload)
- Плавные переходы и анимации
- Индикаторы загрузки для асинхронных операций
- Немедленная обратная связь на действия пользователя
- Toast-уведомления для успешных операций и ошибок
- Подтверждение деструктивных действий (удаление, выход)

## 4. Страницы и компоненты

https://magicui.design/docs/components/animated-theme-toggler

### 4.1 Лендинг (публичная страница)

**Секции:**

- Hero секция с главным заголовком и CTA кнопками
- О платформе (преимущества, как это работает)
- Для кого (блоки для пациентов и психологов)
- Отзывы/статистика
- Призыв к действию (регистрация)
- Footer с контактами и ссылками

**Элементы:**

- Навигационное меню (липкое при скролле)
- Кнопки "Войти" и "Зарегистрироваться"
- Анимации появления элементов при скролле
- Плавный скролл к секциям

### 4.2 Страница входа

**Компоненты:**

- Форма входа (email + пароль)
- Кнопка "Показать/скрыть пароль"
- Чекбокс "Запомнить меня"
- Ссылка "Забыли пароль?"
- Кнопка "Войти через Google" (заглушка с tooltip "Скоро")
- Ссылка на регистрацию
- Валидация в реальном времени
- Отображение ошибок под полями

### 4.3 Страница регистрации

#### Для пациента

**Шаги (мультишаговая форма):**

**Шаг 1: Основная информация**

- Имя (обязательно)
- Фамилия (обязательно)
- Дата рождения (datepicker)
- Email (обязательно, валидация формата)
- Пароль (обязательно, индикатор силы пароля)
- Подтверждение пароля (обязательно)

**Шаг 2: Подключение к психологу**

- Поле для ввода кода психолога
- Валидация кода в реальном времени
- Отображение имени психолога при валидном коде

**Шаг 3: Ваши проблемы**

- Множественный выбор из списка:
  - Тревожность
  - Депрессия
  - Панические атаки
  - Проблемы со сном
  - Стресс
  - Самооценка
  - Отношения
- Текстовое поле "Другое" для своих вариантов
- Кнопки "Назад" и "Зарегистрироваться"

**UI элементы:**

- Индикатор прогресса (шаг X из 3)
- Навигация между шагами
- Сохранение данных при переходе назад

#### Для психолога

**Форма (одна страница):**

- Имя (обязательно)
- Фамилия (обязательно)
- Email (обязательно)
- Пароль (обязательно, индикатор силы)
- Подтверждение пароля (обязательно)
- Специализация (dropdown с популярными + "Другое")
- Лицензия/сертификат (опционально, textarea)

**После успешной регистрации:**

- Модальное окно с уникальным кодом психолога
- Кнопка "Скопировать код"
- Возможность поделиться кодом

### 4.4 Личный кабинет пациента

#### Главная страница (Dashboard)

**Компоненты:**

- Приветствие с именем пользователя
- Карточка "Как вы себя чувствуете сегодня?" (быстрое добавление записи)
- График настроения за последнюю неделю/месяц
- Последние записи настроения (3-5 штук)
- Непрочитанные сообщения от психолога (badge)
- Рекомендованные ресурсы
- Напоминание о непройденных тестах

#### Трекер настроения

**Список записей:**

- Фильтры по датам (календарь, пресеты: неделя, месяц, год)
- Карточки записей с датой, настроением, описанием, триггерами
- Кнопки редактирования/удаления записи
- Пагинация или бесконечный скролл

**Форма добавления записи:**

- Слайдер или эмодзи для выбора настроения (1-10)
- Textarea для описания состояния
- Поле для тегов триггеров (с автодополнением)
- Дата и время (по умолчанию текущие, можно изменить)
- Кнопки "Сохранить" и "Отмена"

**Визуализация:**

- Линейный график изменения настроения во времени
- Возможность переключения периодов
- Интерактивные точки с деталями при наведении

#### Тесты

**Список доступных тестов:**

- Карточки тестов с названием, описанием, временем прохождения
- Иконки для типов тестов
- Кнопка "Пройти тест"
- Статус: "Не пройден" / "Пройден (дата)"

**Прохождение теста:**

- Прогресс-бар (вопрос X из Y)
- Вопрос с вариантами ответов (radio buttons или шкала)
- Кнопки "Назад" и "Далее"
- На последнем вопросе кнопка "Завершить тест"

**Результат теста:**

- Итоговый балл
- Интерпретация результата (цветовая индикация)
- Рекомендации
- График результатов всех пройденных тестов этого типа
- Кнопка "Вернуться к тестам"

**История тестов:**

- Таблица/список пройденных тестов
- Дата, название, результат
- Возможность просмотра деталей

#### Ресурсы

**Список ресурсов:**

- Фильтры по категориям (chips/tags)
- Поиск по названию
- Карточки ресурсов:
  - Иконка типа (статья/видео)
  - Название
  - Категория
  - Автор (психолог)
  - Дата публикации
  - Краткое описание

**Просмотр статьи:**

- Заголовок
- Автор и дата
- Основной контент (форматированный текст)
- Изображения (если есть)
- Кнопка "Назад к ресурсам"

**Просмотр видео:**

- Заголовок
- Встроенный видеоплеер (YouTube iframe)
- Описание под видео
- Кнопка "Назад к ресурсам"

#### Чат с психологом

**Список чатов (если психологов может быть несколько):**

- Карточка психолога с аватаром, именем
- Последнее сообщение (превью)
- Время последнего сообщения
- Badge с количеством непрочитанных

**Окно чата:**

- Шапка с именем психолога и статусом
- Область сообщений (скролл вниз)
- Сообщения пациента справа, психолога слева
- Временные метки
- Поле ввода сообщения
- Кнопка "Отправить"
- Автоскролл к новым сообщениям
- Индикация "печатает..." (если реализовано)

#### Профиль

**Информация:**

- Аватар (загрузка/изменение)
- Имя, фамилия (редактирование)
- Email (отображение, смена через подтверждение)
- Дата рождения
- Информация о психологе (имя, специализация)
- Выбранные проблемы (редактирование)

**Безопасность:**

- Смена пароля (старый + новый + подтверждение)
- Кнопка "Выйти"
- Кнопка "Удалить аккаунт" (с подтверждением)

### 4.5 Личный кабинет психолога

#### Главная страница (Dashboard)

**Компоненты:**

- Приветствие с именем
- Уникальный код психолога (с кнопкой копирования)
- Статистика: количество пациентов, новые сообщения
- Список пациентов (превью)
- Последние добавленные ресурсы
- Быстрые действия (добавить ресурс, написать сообщение)

#### Мои пациенты

**Список пациентов:**

- Карточки/таблица с информацией:
  - Имя пациента
  - Дата регистрации
  - Последняя активность
  - Непрочитанные сообщения
- Кнопки: "Посмотреть профиль", "Написать сообщение"
- Поиск по имени

**Профиль пациента:**

- Основная информация (имя, возраст, проблемы)
- График настроения пациента
- История записей настроения (последние 10)
- Результаты тестов
- Кнопка "Написать сообщение"
- Кнопка "Отключить пациента" (с подтверждением)

#### Ресурсы

**Мои ресурсы:**

- Список всех созданных ресурсов
- Кнопка "Добавить ресурс"
- Для каждого ресурса: название, тип, категория, дата
- Кнопки: "Редактировать", "Удалить"

**Форма добавления/редактирования ресурса:**

- Тип ресурса (radio: статья/видео)
- Название (обязательно)
- Категория (dropdown)
- Контент:
  - Для статьи: WYSIWYG редактор или markdown
  - Для видео: поле URL (валидация YouTube ссылки)
- Описание (краткое)
- Кнопки "Сохранить" и "Отмена"

#### Чаты с пациентами

**Список чатов:**

- Список всех пациентов
- Badge с непрочитанными сообщениями
- Последнее сообщение (превью)
- Поиск по имени пациента

**Окно чата:**

- Аналогично чату пациента, но сообщения психолога справа

#### Профиль

**Информация:**

- Аватар
- Имя, фамилия
- Email
- Специализация (редактирование)
- Лицензия/сертификат
- Уникальный код (с кнопкой копирования)

**Безопасность:**

- Смена пароля
- Кнопка "Выйти"

## 5. Общие UI компоненты

### 5.1 Навигация

**Боковое меню (для авторизованных):**

- Логотип
- Пункты меню (с иконками):
  - Главная
  - Трекер настроения (только пациент)
  - Тесты (только пациент)
  - Мои пациенты (только психолог)
  - Ресурсы
  - Чаты
  - Профиль
- Кнопка "Выйти" внизу

**Мобильная навигация:**

- Hamburger меню
- Выдвижная панель
- Оверлей при открытии

### 5.2 Модальные окна

- Затемнение фона
- Закрытие по клику вне окна или на крестик
- Анимация появления/исчезновения

### 5.3 Формы

**Общие требования:**

- Все поля с label
- Placeholder текст
- Валидация при blur и submit
- Сообщения об ошибках под полями (красный текст)
- Disabled состояние кнопки submit при валидации
- Индикатор загрузки при отправке

**Типы полей:**

- Text input
- Email input (с валидацией)
- Password input (с toggle показа)
- Textarea (с автоматическим расширением)
- Select/Dropdown
- Checkbox
- Radio buttons
- Date picker
- Tag input (с автодополнением)

### 5.4 Уведомления (Toasts)

- Позиция: top-right или bottom-center
- Типы: success, error, info, warning
- Автоматическое исчезновение через 3-5 секунд
- Возможность закрыть вручную
- Иконки в соответствии с типом

### 5.5 Индикаторы загрузки

- Spinner для кнопок при отправке форм
- Skeleton loaders для списков и карточек
- Progress bar для многошаговых процессов

### 5.6 Пустые состояния

- Иллюстрация или иконка
- Поясняющий текст
- CTA кнопка (если применимо)
- Примеры: "Нет записей настроения", "Нет непрочитанных сообщений"

## 6. Интерактивность с HTMX

### 6.1 Основные паттерны

- Формы отправляются через HTMX без перезагрузки
- Динамическая загрузка контента (пагинация, фильтры)
- Обновление частей страницы вместо полной перезагрузки
- Использование hx-target для указания области обновления
- hx-swap для определения стратегии замены контента
- hx-indicator для показа загрузчиков

### 6.2 Оптимизации

- Debounce для поиска и автодополнения
- Lazy loading для списков
- Prefetch для часто используемых страниц
- Кеширование ответов где возможно

## 7. Интерактивность с Alpine.js

### 7.1 Применение

- Управление состоянием UI (открытие/закрытие модалок, меню)
- Тогглы и переключатели
- Табы и аккордеоны
- Локальная валидация форм
- Показ/скрытие элементов
- Счетчики и простая реактивность

### 7.2 Компоненты

- Dropdown меню
- Модальные окна
- Tooltip
- Tabbed navigation
- Expandable sections

## 8. Стилизация Tailwind CSS

### 8.1 Цветовая палитра

**Основные цвета:**

- Primary: синий/фиолетовый (для кнопок, ссылок)
- Success: зеленый (для успешных действий)
- Warning: желтый/оранжевый (для предупреждений)
- Error: красный (для ошибок)
- Neutral: серые тона (для текста, фонов)

**Настроение (для трекера):**

- 1-3: красный (плохое)
- 4-6: желтый (нейтральное)
- 7-10: зеленый (хорошее)

### 8.2 Типографика

- Шрифт: system-ui или современный sans-serif
- Размеры: четкая иерархия (h1-h6, body, small)
- Межстрочный интервал: comfortable reading
- Контраст: достаточный для читаемости

### 8.3 Spacing и Layout

- Консистентные отступы (4px grid)
- Максимальная ширина контейнеров (1280px)
- Карточки с тенями и скругленными углами
- Grid и Flexbox для раскладки

### 8.4 Компоненты

- Кнопки: три размера (sm, md, lg), варианты (primary, secondary, outline, ghost)
- Инпуты: фокус состояния, ошибки, disabled
- Карточки: стандартизированная структура
- Badges: для уведомлений, статусов

## 9. Анимации и переходы

### 9.1 Микроанимации

- Hover эффекты на кнопках и ссылках
- Focus состояния для accessibility
- Плавное появление модальных окон
- Slide transitions для боковых панелей
- Fade для уведомлений

### 9.2 Загрузочные состояния

- Skeleton screens для медленно загружаемого контента
- Pulse animation для скелетонов
- Spinner для кнопок

### 9.3 Performance

- Использование CSS transitions вместо JavaScript где возможно
- Ограничение одновременных анимаций
- Отключение анимаций для prefers-reduced-motion

## 10. Accessibility (A11y)

### 10.1 Обязательные требования

- Семантический HTML
- ARIA атрибуты где необходимо
- Keyboard navigation для всех интерактивных элементов
- Focus indicators
- Alt текст для изображений
- Правильные label для форм

### 10.2 Контрастность

- Минимум WCAG AA (4.5:1 для текста)
- Проверка контраста для всех цветовых комбинаций

### 10.3 Screen readers

- Правильная структура заголовков
- Описательные тексты для ссылок и кнопок
- Live regions для динамического контента

## 11. Производительность

### 11.1 Оптимизация загрузки

- Минификация CSS
- Lazy loading для изображений
- Defer/async для скриптов
- Critical CSS inline

### 11.2 Оптимизация рендеринга

- Избегание layout thrashing
- Debounce для частых событий
- Виртуализация для длинных списков (если нужно)

## 12. Дополнительные требования

### 12.1 PWA возможности (опционально)

- Manifest.json
- Service worker для offline
- Установка на home screen

### 12.2 SEO (для публичных страниц)

- Правильные meta теги
- Open Graph для соцсетей
- Structured data

## 13. Тестирование

### 13.1 Ручное тестирование

- Кросс-браузерность (Chrome, Firefox, Safari, Edge)
- Адаптивность на реальных устройствах
- Все пользовательские сценарии

### 13.2 Automated (опционально)

- E2E тесты для критичных флоу
- Accessibility тесты

## 14. Критерии приемки

- Все страницы реализованы согласно описанию
- Полная адаптивность на всех размерах экранов
- SPA-подобное поведение без перезагрузок
- Валидация форм работает корректно
- Все интерактивные элементы отзывчивы
- Соблюдены принципы accessibility
- Производительность: Lighthouse score > 90
- Весь интерфейс на русском языке
- Работает во всех современных браузерах
